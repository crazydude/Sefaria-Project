# This CloudBuild file will build and deploy the application based on 

# This will stop the need to push commits to the k8s-admin repo to deploy the application 

---
options:
  machineType: N1_HIGHCPU_8

steps:  

  #
  # Build artifacts
  #
  - name: 'gcr.io/kaniko-project/executor:latest'
    args: 
      - "--dockerfile=build/web/Dockerfile"
      - "--context=./"
      - "--destination=gcr.io/production-deployment/sefaria-web-test-kaniko:$SHORT_SHA"
    id: web_container
    wait_for: [ "-" ]
...
